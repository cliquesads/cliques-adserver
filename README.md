# cliques-adserver
Cliques Adserver contains endpoints to handle impressions, clicks and conversions, all post-auction.

# Endpoints

## /crg
Impression endpoint. (crg is short for 'Creative Group'.)  

- Looks up creatives in this creative group and pick a creative according to weights assigned to each, then return the appropriate creative tag for this asset
- Logs the impression and all associated metadata 
 
#### Query Params
- `crgid` :  **REQUIRED** ObjectID of Creative Group sub-doc
- `impid` :  impression_id for associated impression, generated by exchange. Used for logging.
- `pid`   :  ObjectID of placement object in which this ad is being rendered. Passed through by exchange.


## /clk
Click endpoint.

- Redirects to desination URL
- Logs click and all associated metadata

#### Query Params
- `redir` :  **REQUIRED** encoded redirect URL. Will decode and 302 to this URL.
- `cid` :  ObjectID of creative object
- `pid`   :  ObjectID of placement object

## /cnv
Conversion endpoint, called by tracker pixel.

- Logs conversion and all associated metadata

#### Query Params
- `tagid` :  **REQUIRED** ObjectID of tracking tag object
- `value` :  Cart value or any arbitrary value associated with conversion
- `advid` :  ObjectID of advertiser object, owner of this tag

